{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Azure Functions OpenAPI","text":"<p>Welcome to azure-functions-openapi \u2014 a library that provides seamless integration of OpenAPI (Swagger) documentation for Python-based Azure Functions with strong security and performance defaults.</p>"},{"location":"#features","title":"\ud83d\ude80 Features","text":""},{"location":"#core-features","title":"Core Features","text":"<ul> <li><code>@openapi</code> decorator with comprehensive metadata support:</li> <li><code>summary</code>, <code>description</code>, <code>tags</code></li> <li><code>operation_id</code>, <code>route</code>, <code>method</code></li> <li><code>request_model</code>, <code>response_model</code></li> <li><code>parameters</code>, <code>request_body</code>, <code>response</code></li> <li>Automatic generation of:</li> <li><code>/openapi.json</code> - JSON specification</li> <li><code>/openapi.yaml</code> - YAML specification</li> <li><code>/docs</code> - Interactive Swagger UI</li> <li>Pydantic v1 and v2 support with automatic schema generation</li> <li>Type-safe schema generation with full type hints</li> <li>Zero-configuration integration - works out of the box</li> <li>Compatible with Python 3.10+</li> </ul>"},{"location":"#security","title":"\ud83d\udd12 Security","text":"<ul> <li>Enhanced Security: CSP headers, input validation, XSS protection</li> <li>Input Sanitization: Automatic sanitization of routes, operation IDs, and parameters</li> </ul>"},{"location":"#developer-experience","title":"\ud83d\udee0\ufe0f Developer Experience","text":"<ul> <li>CLI Tool: Command-line interface for spec generation and validation</li> <li>Documentation: Detailed guides for security and CLI usage</li> <li>Type Safety: Full type hints and validation throughout</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":""},{"location":"#1-create-a-function-app-and-register-routes","title":"1. Create a Function App and Register Routes","text":"<p>To expose your Azure Functions with OpenAPI documentation, decorate your function with <code>@openapi</code> and register the documentation endpoints manually.</p> <pre><code># function_app.py\n\nimport json\nimport logging\nimport azure.functions as func\nfrom azure_functions_openapi.decorator import openapi\nfrom azure_functions_openapi.openapi import get_openapi_json, get_openapi_yaml\nfrom azure_functions_openapi.swagger_ui import render_swagger_ui\n\napp = func.FunctionApp()\n\n\n@app.route(route=\"http_trigger\", auth_level=func.AuthLevel.ANONYMOUS)\n@openapi(\n    route=\"/api/http_trigger\",\n    summary=\"HTTP Trigger with name parameter\",\n    description=\"\"\"\nReturns a greeting using the **name** from query or body.\n\nYou can pass the name:\n- via query string: `?name=Azure`\n- via JSON body: `{ \"name\": \"Azure\" }`\n\"\"\",\n    operation_id=\"greetUser\",\n    tags=[\"Example\"],\n    parameters=[\n        {\n            \"name\": \"name\",\n            \"in\": \"query\",\n            \"required\": True,\n            \"schema\": {\"type\": \"string\"},\n            \"description\": \"Name to greet\",\n        }\n    ],\n    response={\n        200: {\n            \"description\": \"Successful response with greeting\",\n            \"content\": {\n                \"application/json\": {\n                    \"examples\": {\n                        \"sample\": {\n                            \"summary\": \"Example greeting\",\n                            \"value\": {\"message\": \"Hello, Azure!\"},\n                        }\n                    }\n                }\n            },\n        },\n        400: {\"description\": \"Invalid request\"},\n    },\n)\ndef http_trigger(req: func.HttpRequest) -&gt; func.HttpResponse:\n    name = req.params.get(\"name\")\n    if not name:\n        try:\n            body = req.get_json()\n            name = body.get(\"name\") if isinstance(body, dict) else None\n        except ValueError:\n            pass\n\n    if not name:\n        return func.HttpResponse(\"Invalid request \u2013 `name` is required\", status_code=400)\n\n    return func.HttpResponse(\n        json.dumps({\"message\": f\"Hello, {name}!\"}),\n        mimetype=\"application/json\",\n        status_code=200,\n    )\n\n\n# OpenAPI documentation routes\n@app.route(route=\"openapi.json\", auth_level=func.AuthLevel.ANONYMOUS)\ndef openapi_spec(req: func.HttpRequest) -&gt; func.HttpResponse:\n    return func.HttpResponse(get_openapi_json(), mimetype=\"application/json\")\n\n\n@app.route(route=\"openapi.yaml\", auth_level=func.AuthLevel.ANONYMOUS)\ndef openapi_yaml_spec(req: func.HttpRequest) -&gt; func.HttpResponse:\n    return func.HttpResponse(get_openapi_yaml(), mimetype=\"application/x-yaml\")\n\n\n@app.route(route=\"docs\", auth_level=func.AuthLevel.ANONYMOUS)\n@app.function_name(name=\"swagger_ui\")\ndef swagger_ui(req: func.HttpRequest) -&gt; func.HttpResponse:\n    return render_swagger_ui()\n</code></pre>"},{"location":"#2-run-the-app","title":"2. Run the App","text":"<p>Use the Azure Functions Core Tools:</p> <pre><code>func start\n</code></pre>"},{"location":"#3-view-the-swagger-api","title":"3. View the Swagger API","text":"<p>Once the app is running, open your browser:</p> <ul> <li>OpenAPI JSON: http://localhost:7071/openapi.json</li> <li>OpenAPI YAML: http://localhost:7071/openapi.yaml</li> <li>Swagger UI: http://localhost:7071/docs</li> </ul>"},{"location":"#documentation","title":"\ud83d\udcda Documentation","text":""},{"location":"#getting-started_1","title":"Getting Started","text":"<ul> <li>Quickstart Guide - Get up and running quickly</li> <li>Installation Guide - Detailed installation instructions</li> <li>API Reference - Complete API documentation</li> <li>Development Guide - Development setup and guidelines</li> <li>Testing Guide - Run the test suite locally</li> </ul>"},{"location":"#advanced-features","title":"Advanced Features","text":"<ul> <li>Security Guide - Security best practices and features</li> <li>CLI Tool Guide - Command-line interface usage</li> </ul>"},{"location":"#examples","title":"Examples","text":"<ul> <li>Hello OpenAPI Example - Basic example</li> <li>Todo CRUD API Example - Advanced example with Pydantic</li> </ul>"},{"location":"#support","title":"Support","text":"<ul> <li>Troubleshooting - Common issues and fixes</li> <li>Changelog - Version history and changes</li> <li>Contributing - How to contribute</li> </ul>"},{"location":"#about","title":"About","text":"<ul> <li>Repository: GitHub</li> <li>License: MIT</li> </ul>"},{"location":"api/","title":"API Reference","text":"<p>This document provides comprehensive API reference for the azure-functions-openapi library.</p>"},{"location":"api/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Core Components</li> <li>OpenAPI Helpers</li> <li>Swagger UI</li> <li>CLI Commands</li> </ul>"},{"location":"api/#core-components","title":"Core Components","text":""},{"location":"api/#openapi-decorator","title":"<code>@openapi</code> Decorator","text":"<p>The <code>@openapi</code> decorator attaches OpenAPI metadata to an Azure Function route. This metadata is collected to generate the OpenAPI spec using <code>get_openapi_json()</code> and <code>get_openapi_yaml()</code>.</p>"},{"location":"api/#errors","title":"Errors","text":"<p>Validation and generation errors raise standard Python exceptions.</p>"},{"location":"api/#caching","title":"Caching","text":"<p>Caching is not provided by this library. Apply caching at the application or platform level if needed.</p>"},{"location":"api/#openapi-helpers","title":"OpenAPI Helpers","text":"<pre><code>from azure_functions_openapi.openapi import (\n    generate_openapi_spec,\n    get_openapi_json,\n    get_openapi_yaml,\n)\n</code></pre> <p>Use these helpers to generate the OpenAPI spec directly for custom endpoints or offline workflows.</p>"},{"location":"api/#swagger-ui","title":"Swagger UI","text":"<pre><code>from azure_functions_openapi.swagger_ui import render_swagger_ui\n</code></pre> <p><code>render_swagger_ui()</code> returns an <code>HttpResponse</code> with security headers and the Swagger UI HTML.</p>"},{"location":"api/#cli-commands","title":"CLI Commands","text":"<p>The CLI exposes:</p> <ul> <li><code>generate</code> for OpenAPI spec generation</li> <li>Use external validators (e.g., <code>openapi-spec-validator</code>) for spec validation</li> </ul>"},{"location":"api/#parameters","title":"Parameters","text":"Name Type Description summary str Short summary shown in Swagger UI description str Long description in Markdown request_model BaseModel Pydantic model for request body (auto schema) request_body dict Manual schema for request body (if not using a model) response_model BaseModel Pydantic model for response body (200 by default) response dict Custom response object with status codes and examples tags List[str] Group endpoints under tags in Swagger UI operation_id str Unique identifier for the operation route str Optional override for the HTTP path in spec method str Optional override for the HTTP method in spec parameters list Query, path, header, or cookie parameters"},{"location":"api/#complete-example-get","title":"Complete Example (GET)","text":"<pre><code>@openapi(\n    summary=\"Get a todo by ID\",\n    description=\"\"\"\nRetrieve a single todo item by its ID, passed via query string.\n\nSupports optional header `X-Request-ID` for tracing.\n\"\"\",\n    tags=[\"Todos\"],\n    operation_id=\"getTodo\",\n    route=\"/api/get_todo\",\n    method=\"get\",\n    parameters=[\n        {\n            \"name\": \"id\",\n            \"in\": \"query\",\n            \"required\": True,\n            \"description\": \"ID of the todo item\",\n            \"schema\": {\"type\": \"integer\"}\n        },\n        {\n            \"name\": \"X-Request-ID\",\n            \"in\": \"header\",\n            \"required\": False,\n            \"description\": \"Optional request ID for logging\",\n            \"schema\": {\"type\": \"string\"}\n        }\n    ],\n    request_model=None,\n    request_body=None,\n    response_model=TodoResponse,\n    response={\n        200: {\"description\": \"Todo item returned\"},\n        400: {\"description\": \"Invalid ID\"},\n        404: {\"description\": \"Todo not found\"}\n    }\n)\n</code></pre> <p>This example demonstrates: - <code>query</code> parameter for the <code>id</code> - <code>header</code> parameter for an optional custom header - <code>response_model</code> for typed 200 response - <code>response</code> for full control over status codes</p>"},{"location":"api/#notes","title":"Notes","text":"<ul> <li><code>parameters</code> follow the OpenAPI spec format and support <code>query</code>, <code>path</code>, <code>header</code>, and (planned) <code>cookie</code>.</li> <li>You can mix <code>response_model</code> with manual <code>response</code> for extended behavior.</li> <li>All metadata is stored and rendered dynamically at runtime via the registry.</li> </ul>"},{"location":"architecture/","title":"Architecture Guide","text":"<p>This document provides an overview of the azure-functions-openapi library architecture, design decisions, and internal components.</p>"},{"location":"architecture/#system-architecture","title":"\ud83c\udfd7\ufe0f System Architecture","text":""},{"location":"architecture/#high-level-overview","title":"High-Level Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Azure Functions App                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                        \u2502\n\u2502  \u2502   @openapi      \u2502                                        \u2502\n\u2502  \u2502   Decorator     \u2502                                        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                        \u2502\n\u2502           \u2502                                                  \u2502\n\u2502           \u25bc                                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502              OpenAPI Registry                           \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502           \u2502                                                  \u2502\n\u2502           \u25bc                                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502              OpenAPI Generation                         \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502\n\u2502  \u2502  \u2502   JSON      \u2502  \u2502   YAML      \u2502  \u2502   Swagger UI    \u2502 \u2502 \u2502\n\u2502  \u2502  \u2502   Spec      \u2502  \u2502   Spec      \u2502  \u2502   Rendering     \u2502 \u2502 \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#core-components","title":"\ud83d\udd27 Core Components","text":""},{"location":"architecture/#1-decorator-system-decoratorpy","title":"1. Decorator System (<code>decorator.py</code>)","text":"<p>The <code>@openapi</code> decorator is the heart of the system:</p> <pre><code>@openapi(\n    summary=\"API endpoint\",\n    description=\"Detailed description\",\n    tags=[\"API\"],\n    request_model=RequestModel,\n    response_model=ResponseModel\n)\ndef my_function(req: func.HttpRequest) -&gt; func.HttpResponse:\n    # Function implementation\n</code></pre> <p>Key Features: - Metadata Collection: Stores OpenAPI metadata in a global registry - Input Validation: Validates and sanitizes all decorator parameters - Type Safety: Full type hints and validation</p>"},{"location":"architecture/#2-openapi-generation-openapipy","title":"2. OpenAPI Generation (<code>openapi.py</code>)","text":"<p>Converts registered metadata into OpenAPI 3.0 specifications:</p> <pre><code># Generate OpenAPI spec\nspec = generate_openapi_spec(title=\"My API\", version=\"1.0.0\")\n\n# Get JSON/YAML formats\njson_spec = get_openapi_json()\nyaml_spec = get_openapi_yaml()\n</code></pre> <p>Key Features: - Schema Generation: Automatic Pydantic model to JSON Schema conversion - Error Resilience: Graceful handling of schema generation failures - Validation: Comprehensive input validation</p>"},{"location":"architecture/#3-swagger-ui-swagger_uipy","title":"3. Swagger UI (<code>swagger_ui.py</code>)","text":"<p>Renders interactive API documentation:</p> <pre><code># Render Swagger UI with enhanced security\nresponse = render_swagger_ui(\n    title=\"API Documentation\",\n    openapi_url=\"/api/openapi.json\",\n    custom_csp=\"custom-csp-policy\"\n)\n</code></pre> <p>Key Features: - Security Headers: CSP, X-Frame-Options, X-XSS-Protection - Input Sanitization: XSS protection and content validation - Customization: Configurable CSP policies and UI options</p>"},{"location":"architecture/#4-operational-concerns","title":"4. Operational Concerns","text":"<p>This library focuses on OpenAPI generation and documentation rendering.</p>"},{"location":"architecture/#data-flow","title":"\ud83d\udd04 Data Flow","text":""},{"location":"architecture/#1-function-registration","title":"1. Function Registration","text":"<pre><code>Function Definition \u2192 @openapi Decorator \u2192 Metadata Validation \u2192 Registry Storage\n</code></pre>"},{"location":"architecture/#2-openapi-generation","title":"2. OpenAPI Generation","text":"<pre><code>Registry \u2192 Schema Generation \u2192 JSON/YAML Output\n</code></pre>"},{"location":"architecture/#3-swagger-ui-rendering","title":"3. Swagger UI Rendering","text":"<pre><code>Request \u2192 Security Validation \u2192 HTML Generation \u2192 Security Headers \u2192 Response\n</code></pre>"},{"location":"architecture/#security-architecture","title":"\ud83d\udee1\ufe0f Security Architecture","text":""},{"location":"architecture/#input-validation-pipeline","title":"Input Validation Pipeline","text":"<pre><code>User Input \u2192 Sanitization \u2192 Validation \u2192 Processing \u2192 Response\n</code></pre>"},{"location":"architecture/#security-headers","title":"Security Headers","text":"<ul> <li>CSP: Content Security Policy for XSS protection</li> <li>X-Frame-Options: Clickjacking protection</li> <li>X-XSS-Protection: XSS filtering</li> <li>X-Content-Type-Options: MIME type sniffing protection</li> </ul>"},{"location":"architecture/#extension-points","title":"\ud83d\udd27 Extension Points","text":""},{"location":"architecture/#deployment-architecture","title":"\ud83d\ude80 Deployment Architecture","text":""},{"location":"architecture/#azure-functions-integration","title":"Azure Functions Integration","text":"<pre><code>Azure Functions Runtime \u2192 Function App \u2192 OpenAPI Routes \u2192 Documentation\n</code></pre>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#changelog_1","title":"Changelog","text":"<p>The full changelog is maintained in the root CHANGELOG.md.</p>"},{"location":"cli/","title":"CLI Tool Guide","text":"<p>The Azure Functions OpenAPI CLI tool provides command-line access to various features of the library.</p>"},{"location":"cli/#installation","title":"Installation","text":"<p>The CLI tool is automatically installed when you install the package:</p> <pre><code>pip install azure-functions-openapi\n</code></pre>"},{"location":"cli/#usage","title":"Usage","text":""},{"location":"cli/#basic-commands","title":"Basic Commands","text":"<pre><code># Show help\nazure-functions-openapi --help\n\n# Show command-specific help\nazure-functions-openapi generate --help\n</code></pre>"},{"location":"cli/#generate-openapi-specification","title":"Generate OpenAPI Specification","text":"<p>Generate an OpenAPI specification:</p> <pre><code># Generate JSON specification\nazure-functions-openapi generate --title \"My API\" --version \"1.0.0\"\n\n# Generate YAML specification\nazure-functions-openapi generate --format yaml --title \"My API\" --version \"1.0.0\"\n\n# Save to file\nazure-functions-openapi generate --output openapi.json --title \"My API\" --version \"1.0.0\"\n\n# Pretty print output\nazure-functions-openapi generate --pretty --title \"My API\" --version \"1.0.0\"\n</code></pre>"},{"location":"cli/#generate-command-options","title":"Generate Command Options","text":"<ul> <li><code>--title</code>: API title (default: \"API\")</li> <li><code>--version</code>: API version (default: \"1.0.0\")</li> <li><code>--output, -o</code>: Output file path</li> <li><code>--format, -f</code>: Output format (json or yaml, default: json)</li> <li><code>--pretty, -p</code>: Pretty print output</li> </ul>"},{"location":"cli/#validate-openapi-specification","title":"Validate OpenAPI Specification","text":"<p>Use external validators to check generated specs:</p> <pre><code>openapi-spec-validator openapi.json\n</code></pre>"},{"location":"cli/#examples","title":"Examples","text":""},{"location":"cli/#generate-api-documentation","title":"Generate API Documentation","text":"<pre><code># Generate comprehensive API documentation\nazure-functions-openapi generate \\\n  --title \"User Management API\" \\\n  --version \"2.1.0\" \\\n  --output docs/api-spec.json \\\n  --format json \\\n  --pretty\n</code></pre> <p>The CLI tool provides one primary command:</p> <ul> <li><code>generate</code>: Create OpenAPI JSON/YAML output</li> </ul>"},{"location":"cli/#cicd-integration","title":"CI/CD Integration","text":"<pre><code># .github/workflows/api-validation.yml\nname: API Validation\n\non: [push, pull_request]\n\njobs:\n  validate-api:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v6\n      - name: Set up Python\n        uses: actions/setup-python@v6\n        with:\n          python-version: 3.10\n      - name: Install dependencies\n        run: |\n          pip install azure-functions-openapi openapi-spec-validator\n      - name: Generate OpenAPI spec\n        run: |\n          azure-functions-openapi generate --output openapi.json\n      - name: Validate OpenAPI spec\n        run: |\n          openapi-spec-validator openapi.json\n      - name: Upload artifacts\n        uses: actions/upload-artifact@v2\n        with:\n          name: openapi-spec\n          path: openapi.json\n</code></pre>"},{"location":"cli/#exit-codes","title":"Exit Codes","text":"<p>The CLI tool uses standard exit codes:</p> <ul> <li><code>0</code>: Success</li> <li><code>1</code>: General error</li> <li><code>2</code>: Invalid arguments</li> </ul>"},{"location":"cli/#configuration","title":"Configuration","text":""},{"location":"cli/#environment-variables","title":"Environment Variables","text":"<p>You can configure the CLI tool using environment variables:</p> <pre><code># Set default output format\nexport AZURE_FUNCTIONS_OPENAPI_DEFAULT_FORMAT=yaml\n\n# Set default output directory\nexport AZURE_FUNCTIONS_OPENAPI_OUTPUT_DIR=./docs\n</code></pre>"},{"location":"cli/#configuration-file","title":"Configuration File","text":"<p>Create a configuration file at <code>~/.azure-functions-openapi/config.json</code>:</p> <pre><code>{\n  \"default_format\": \"json\",\n  \"default_output_dir\": \"./docs\",\n  \"pretty_print\": true\n}\n</code></pre>"},{"location":"cli/#integration-with-other-tools","title":"Integration with Other Tools","text":""},{"location":"cli/#jq-integration","title":"jq Integration","text":"<p>Use jq to process JSON output:</p> <pre><code># Filter OpenAPI info\nazure-functions-openapi generate --format json | jq '.info'\n</code></pre>"},{"location":"cli/#curl-integration","title":"curl Integration","text":"<p>Use curl to send generated specs to other services:</p> <pre><code># Generate spec and send to API gateway\nazure-functions-openapi generate --format json | \\\n  curl -X POST -H \"Content-Type: application/json\" \\\n  -d @- https://api-gateway.example.com/specs\n</code></pre>"},{"location":"cli/#docker-integration","title":"Docker Integration","text":"<p>Use the CLI tool in Docker containers:</p> <pre><code>FROM python:3.10-slim\n\n# Install the package\nRUN pip install azure-functions-openapi\n\n# Copy your application\nCOPY . /app\nWORKDIR /app\n\n# Use the CLI tool\nCMD [\"azure-functions-openapi\", \"generate\", \"--output\", \"/app/openapi.json\"]\n</code></pre>"},{"location":"cli/#troubleshooting","title":"Troubleshooting","text":""},{"location":"cli/#common-issues","title":"Common Issues","text":"<ol> <li> <p>Command not found <pre><code># Make sure the package is installed\npip install azure-functions-openapi\n\n# Check if the command is in PATH\nwhich azure-functions-openapi\n</code></pre></p> </li> <li> <p>Permission denied <pre><code># Make sure you have write permissions for output files\nchmod 755 /path/to/output/directory\n</code></pre></p> </li> <li> <p>Invalid JSON/YAML <pre><code># Validate your input files\nopenapi-spec-validator your-file.json\n</code></pre></p> </li> </ol>"},{"location":"cli/#debug-mode","title":"Debug Mode","text":"<p>Enable debug mode for more verbose output:</p> <pre><code># Set debug environment variable\nexport AZURE_FUNCTIONS_OPENAPI_DEBUG=1\n\n# Run command with debug output\nazure-functions-openapi generate --title \"Debug API\"\n</code></pre>"},{"location":"cli/#log-files","title":"Log Files","text":"<p>The CLI tool logs to: - Console output (stdout/stderr) - System logs (when available) - Debug files (when debug mode is enabled)</p>"},{"location":"contributing/","title":"Contributing Guide","text":""},{"location":"contributing/#contributing","title":"Contributing","text":"<p>The contribution guidelines are maintained in the root CONTRIBUTING.md.</p>"},{"location":"development/","title":"Development Guide","text":"<p>This guide covers how to set up a local development environment, run tests, and manage code quality for azure-functions-openapi, using Hatch and a Makefile for workflow automation.</p>"},{"location":"development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+ installed on your system</li> <li>Git for version control</li> <li>Hatch as the build and environment manager (installed via <code>pip install hatch</code>)</li> <li>Make for running the provided Makefile targets</li> <li>git-cliff for changelog generation (install from git-cliff.org)</li> </ul>"},{"location":"development/#project-structure","title":"Project Structure","text":"<pre><code>azure-functions-openapi/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 azure_functions_openapi/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 cli.py\n\u2502       \u251c\u2500\u2500 decorator.py\n\u2502       \u251c\u2500\u2500 openapi.py\n\u2502       \u2514\u2500\u2500 swagger_ui.py\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 examples/\n\u251c\u2500\u2500 docs/\n\u251c\u2500\u2500 .github/\n\u2502   \u2514\u2500\u2500 workflows/\n\u251c\u2500\u2500 cliff.toml                # git-cliff changelog configuration\n\u251c\u2500\u2500 .pre-commit-config.yaml\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 README.md\n</code></pre> <ul> <li><code>Makefile</code> \u2014 common commands for environment setup, testing, linting, releasing, and publishing.</li> <li><code>pyproject.toml</code> \u2014 Hatch environments, project metadata, and tool configuration.</li> <li><code>cliff.toml</code> \u2014 git-cliff configuration for changelog generation from conventional commits.</li> <li><code>src/azure_functions_openapi/</code> \u2014 core library code including decorator, OpenAPI generator, and Swagger UI.</li> <li><code>tests/</code> \u2014 unit and integration tests.</li> <li><code>docs/</code> \u2014 documentation files served by MkDocs.</li> <li><code>examples/</code> \u2014 sample Azure Functions projects demonstrating library usage.</li> </ul>"},{"location":"development/#initial-setup","title":"Initial Setup","text":"<ol> <li> <p>Clone the repository:     <pre><code>git clone https://github.com/yeongseon/azure-functions-openapi.git\ncd azure-functions-openapi\n</code></pre></p> </li> <li> <p>Create environment and install dependencies:     <pre><code>make install\n</code></pre></p> </li> <li> <p>Install pre-commit hooks:     <pre><code>make precommit-install\n</code></pre></p> </li> </ol>"},{"location":"development/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>This project uses pre-commit to ensure consistent code quality across formatting, linting, typing, and security.</p> Tool Version Purpose black 26.1.0 Auto-code formatter ruff v0.14.13 Linter + import sorter + fixer mypy v1.19.1 Static type checker bandit 1.9.3 Security checker on <code>src/</code> only"},{"location":"development/#bandit-configuration","title":"Bandit Configuration","text":"<ul> <li>Only scans <code>src/</code> directory</li> <li>Skips <code>tests/</code></li> <li>Uses <code>pass_filenames: false</code> for full-directory analysis</li> </ul>"},{"location":"development/#run-hooks-manually","title":"Run Hooks Manually","text":"<pre><code>make precommit\n</code></pre>"},{"location":"development/#development-workflow","title":"Development Workflow","text":"<ol> <li> <p>Create a feature branch:     <pre><code>git checkout -b feature/your-description\n</code></pre></p> </li> <li> <p>Implement changes in <code>src/azure_functions_openapi/</code> and add corresponding tests in <code>tests/</code>.</p> </li> <li> <p>Run quality checks locally:     <pre><code>make check-all\n</code></pre></p> </li> <li> <p>Commit changes with Conventional Commits format:     <pre><code>git commit -m \"feat: add new parameter type support\"\n</code></pre></p> </li> <li> <p>Push and open a Pull Request to <code>main</code>.</p> </li> </ol>"},{"location":"development/#makefile-targets","title":"Makefile Targets","text":"<p>Use these as the golden commands for local validation and CI parity. Prefer <code>make</code> targets over direct tool commands.</p> Target Description <code>make install</code> Create Hatch env and install pre-commit hooks <code>make format</code> Format code (ruff + black) <code>make lint</code> Run linter (ruff + mypy) <code>make typecheck</code> Run mypy type checking <code>make security</code> Run Bandit security scan <code>make test</code> Run pytest <code>make cov</code> Run tests with coverage <code>make check</code> Run lint + typecheck <code>make check-all</code> Run lint + typecheck + test <code>make build</code> Build package <code>make changelog</code> Regenerate CHANGELOG.md via git-cliff <code>make release-patch</code> Bump patch version + changelog + tag <code>make release-minor</code> Bump minor version + changelog + tag <code>make release-major</code> Bump major version + changelog + tag <code>make publish-pypi</code> Publish to PyPI <code>make publish-test</code> Publish to TestPyPI <code>make precommit</code> Run all pre-commit hooks <code>make precommit-install</code> Install pre-commit hooks <code>make doctor</code> Show environment diagnostic info <code>make clean</code> Remove build artifacts <code>make clean-all</code> Deep clean (caches, coverage, venv) <p>For the full release workflow, see Release Process.</p>"},{"location":"development/#tips","title":"Tips","text":"<ul> <li>Ensure you're using Python 3.10+.</li> <li>Use <code>make check-all</code> before committing to validate your changes.</li> <li>Prefer <code>make</code> commands to ensure consistent dev experience across platforms.</li> <li>Follow Conventional Commits for proper changelog generation.</li> </ul>"},{"location":"installation/","title":"Installation","text":"<p>This project supports Python-based Azure Functions using the Programming Model v2.</p>"},{"location":"installation/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Requirements</li> <li>Installation</li> <li>Azure Functions Core Tools (Platform Notes)</li> <li>Local Development</li> </ul>"},{"location":"installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10+ (3.10\u20133.12 tested)</li> <li>Azure Functions Core Tools</li> <li>Azure Functions Python Programming Model v2</li> </ul> <p>This library is not compatible with the legacy v1 model.</p>"},{"location":"installation/#installation_1","title":"Installation","text":"<p>Install the package via pip:</p> <pre><code>pip install azure-functions-openapi\n</code></pre> <p>Then ensure your <code>requirements.txt</code> includes:</p> <pre><code>azure-functions\nazure-functions-openapi\n</code></pre> <p>If you're developing locally:</p> <pre><code>pip install -e .[dev]\n</code></pre>"},{"location":"installation/#azure-functions-core-tools-platform-notes","title":"Azure Functions Core Tools (Platform Notes)","text":"<p>Install Azure Functions Core Tools using the official instructions:</p> <ul> <li>Windows: https://learn.microsoft.com/azure/azure-functions/functions-run-local</li> <li>macOS: https://learn.microsoft.com/azure/azure-functions/functions-run-local</li> <li>Linux: https://learn.microsoft.com/azure/azure-functions/functions-run-local</li> </ul> <p>Verify installation:</p> <pre><code>func --version\n</code></pre>"},{"location":"installation/#local-development","title":"Local Development","text":"<pre><code>python -m venv .venv\nsource .venv/bin/activate\npip install -e .[dev]\n</code></pre>"},{"location":"release_process/","title":"Release Process","text":"<p>This document outlines the steps to release a new version of azure-functions-openapi to PyPI and update the changelog using the existing Makefile and Hatch-based workflows.</p>"},{"location":"release_process/#step-1-bump-version-and-generate-changelog","title":"\ud83e\uddfe Step 1: Bump Version and Generate Changelog","text":"<p>Use Makefile targets to bump the version and update the changelog:</p> <pre><code>make release-patch     # Patch release (e.g., v0.10.0 \u2192 v0.10.1)\nmake release-minor     # Minor release (e.g., v0.10.1 \u2192 v0.11.0)\nmake release-major     # Major release (e.g., v0.11.0 \u2192 v1.0.0)\n</code></pre> <p>Each command will:</p> <ol> <li>Update the version in <code>src/azure_functions_openapi/__init__.py</code></li> <li>Generate or update <code>CHANGELOG.md</code> via <code>git-cliff</code></li> <li>Commit the version bump and changelog</li> <li>Create a Git tag (e.g., <code>v0.11.0</code>) and push to <code>main</code></li> </ol> <p>Make sure your <code>main</code> branch is up-to-date before running these commands.</p>"},{"location":"release_process/#changelog-generation","title":"\ud83d\udcdd Changelog Generation","text":"<p>The changelog is generated automatically by git-cliff from conventional commit messages.</p>"},{"location":"release_process/#configuration","title":"Configuration","text":"<ul> <li><code>cliff.toml</code> \u2014 defines commit grouping, emoji categories, and output format</li> <li><code>Makefile</code> \u2014 <code>make changelog</code> runs <code>git-cliff -o CHANGELOG.md</code></li> </ul>"},{"location":"release_process/#commit-message-convention","title":"Commit Message Convention","text":"<p>Follow Conventional Commits for proper changelog grouping:</p> Prefix Changelog Category <code>feat:</code> \ud83d\ude80 Features <code>fix:</code> \ud83d\udc1b Bug Fixes <code>docs:</code> \ud83d\udcda Documentation <code>refactor:</code> \ud83d\ude9c Refactor <code>style:</code> \ud83c\udfa8 Styling <code>test:</code> \ud83e\uddea Testing <code>perf:</code> \u26a1 Performance <code>ci:</code> / <code>chore:</code> \u2699\ufe0f Miscellaneous Tasks <code>build:</code> \ud83d\udcbc Other <p>Use scopes for more context: <code>fix(openapi): preserve explicit 200 response</code></p>"},{"location":"release_process/#manual-changelog-regeneration","title":"Manual Changelog Regeneration","text":"<pre><code>make changelog           # Regenerate CHANGELOG.md from all tags\nmake commit-changelog    # Stage and commit the updated changelog\n</code></pre>"},{"location":"release_process/#step-2-build-and-test-the-package","title":"\ud83d\udce6 Step 2: Build and Test the Package","text":"<pre><code>make build\n</code></pre> <p>To test the local build:</p> <pre><code>pip install dist/azure_functions_openapi-&lt;version&gt;-py3-none-any.whl\n</code></pre>"},{"location":"release_process/#step-3-publish-to-pypi","title":"\ud83d\ude80 Step 3: Publish to PyPI","text":"<pre><code>make publish-pypi\n</code></pre> <ul> <li>Uses <code>hatch publish</code> under the hood</li> <li>Relies on <code>~/.pypirc</code> for authentication (must contain PyPI token)</li> </ul>"},{"location":"release_process/#step-4-optional-publish-to-testpypi","title":"\ud83d\udd01 Step 4: (Optional) Publish to TestPyPI","text":"<pre><code>make publish-test\n</code></pre> <p>To install from TestPyPI:</p> <pre><code>pip install --index-url https://test.pypi.org/simple/ azure-functions-openapi\n</code></pre>"},{"location":"release_process/#summary-of-makefile-commands","title":"\u2705 Summary of Makefile Commands","text":"Task Command Version bump + changelog <code>make release-patch</code> / <code>release-minor</code> / <code>release-major</code> Build distributions <code>make build</code> Publish to PyPI <code>make publish-pypi</code> Publish to TestPyPI <code>make publish-test</code> Regenerate changelog only <code>make changelog</code> Show current version <code>make version</code>"},{"location":"release_process/#related","title":"\ud83d\udd17 Related","text":"<ul> <li>CHANGELOG.md</li> <li>Development Guide</li> <li>Contributing</li> <li>PyPI Publishing with Hatch</li> </ul>"},{"location":"security/","title":"Security Guide","text":""},{"location":"security/#security-guide_1","title":"Security Guide","text":"<p>The canonical security policy is maintained in the root SECURITY.md.</p>"},{"location":"security/#operation-id-sanitization","title":"Operation ID Sanitization","text":"<p>Operation IDs are sanitized to: - Remove dangerous characters - Keep only alphanumeric characters and underscores - Ensure they start with a letter (prefixed with <code>op_</code> if needed)</p>"},{"location":"security/#parameter-validation","title":"Parameter Validation","text":"<p>Parameters are validated to ensure: - Required fields (<code>name</code>, <code>in</code>) are present - Each parameter is a valid dictionary - Parameter structure follows OpenAPI specification</p>"},{"location":"security/#tag-validation","title":"Tag Validation","text":"<p>Tags are validated to: - Ensure they are strings - Remove whitespace - Prevent empty tags</p>"},{"location":"security/#caching","title":"Caching","text":"<p>Caching should be handled at the application or platform level.</p>"},{"location":"security/#security-best-practices","title":"Security Best Practices","text":""},{"location":"security/#for-developers","title":"For Developers","text":"<ol> <li>Always validate input: Use the built-in validation functions</li> <li>Sanitize user data: Let the library handle sanitization</li> <li>Use HTTPS: Ensure your Azure Functions use HTTPS</li> <li>Monitor logs: Check error logs for security issues</li> <li>Keep dependencies updated: Regularly update the library</li> </ol>"},{"location":"security/#for-deployment","title":"For Deployment","text":"<ol> <li>Environment Variables: Use secure environment variables for configuration</li> <li>Network Security: Configure proper network security groups</li> <li>Access Control: Implement proper authentication and authorization</li> <li>Regular Updates: Keep the runtime and dependencies updated</li> </ol>"},{"location":"security/#for-api-design","title":"For API Design","text":"<ol> <li>Minimal Information: Don't expose sensitive information in OpenAPI specs</li> <li>Proper Authentication: Document authentication requirements</li> <li>Rate Limiting: Implement rate limiting for your APIs</li> <li>Input Validation: Validate all inputs at the application level</li> <li>Error Messages: Don't expose internal details in error messages</li> </ol>"},{"location":"security/#security-configuration","title":"Security Configuration","text":""},{"location":"security/#custom-csp-policy","title":"Custom CSP Policy","text":"<p>You can provide a custom CSP policy:</p> <pre><code>from azure_functions_openapi.swagger_ui import render_swagger_ui\n\ncustom_csp = \"default-src 'self'; script-src 'self'\"\nresponse = render_swagger_ui(custom_csp=custom_csp)\n</code></pre>"},{"location":"security/#security-headers","title":"Security Headers","text":"<p>Security headers are automatically added to all responses. You can customize them by modifying the <code>render_swagger_ui</code> function.</p>"},{"location":"security/#logging","title":"Logging","text":"<p>Security events are logged with appropriate levels: - <code>INFO</code>: Normal operations - <code>WARNING</code>: Security warnings (e.g., invalid input) - <code>ERROR</code>: Security errors (e.g., validation failures)</p>"},{"location":"security/#security-automation","title":"Security Automation","text":""},{"location":"security/#cicd-scanning","title":"CI/CD Scanning","text":"<p>The repository uses automated security scanning:</p> <ul> <li>Bandit for Python static analysis</li> <li>Semgrep for broader rule coverage</li> </ul> <p>Security scans run in GitHub Actions via <code>.github/workflows/security.yml</code>. For local parity, run <code>make security</code>. - Dependabot for dependency updates</p>"},{"location":"security/#sbom-generation","title":"SBOM Generation","text":"<p>Software Bill of Materials (SBOM) generation is supported via CI workflows to track dependency inventory and reduce supply chain risk.</p>"},{"location":"security/#security-headers-validation","title":"Security Headers Validation","text":"<p>Validate that security headers are present on Swagger UI responses:</p> <ul> <li><code>X-Content-Type-Options</code></li> <li><code>X-Frame-Options</code></li> <li><code>Referrer-Policy</code></li> <li><code>Content-Security-Policy</code></li> </ul> <p>Automated checks should be included in tests or smoke checks for deployments.</p>"},{"location":"security/#data-privacy-and-compliance","title":"Data Privacy and Compliance","text":"<p>When processing user data:</p> <ul> <li>Avoid storing sensitive data in logs</li> <li>Minimize data collection and retention</li> <li>Use encryption in transit and at rest</li> <li>Follow applicable privacy regulations for your region</li> </ul>"},{"location":"security/#incident-response","title":"Incident Response","text":"<p>Follow your organization's standard security runbooks for incidents and disclosures.</p>"},{"location":"security/#reporting-security-issues","title":"Reporting Security Issues","text":"<p>If you discover a security vulnerability, please:</p> <ol> <li>Do not create a public issue</li> <li>Email security concerns to: yeongseon.choe@gmail.com</li> <li>Include detailed information about the vulnerability</li> <li>Allow time for the issue to be addressed before disclosure</li> </ol>"},{"location":"security/#security-updates","title":"Security Updates","text":"<p>Security updates are released as: - Patch versions (e.g., 1.0.1) for critical security fixes - Minor versions (e.g., 1.1.0) for security improvements - Major versions (e.g., 2.0.0) for breaking security changes</p> <p>Always update to the latest version to ensure you have the latest security fixes.</p>"},{"location":"testing/","title":"Testing Guide","text":"<p>This project targets 85%+ total coverage for core modules.</p> <p>Latest measured result (CI): 87% (2026-02-09).</p>"},{"location":"testing/#test-structure","title":"Test Structure","text":"<ul> <li><code>tests/</code>: unit and integration-oriented test modules</li> </ul>"},{"location":"testing/#run-tests","title":"Run Tests","text":"<pre><code>make test\nmake cov\n</code></pre>"},{"location":"testing/#coverage-policy","title":"Coverage Policy","text":"<ul> <li>CI runs tests on Python <code>3.10</code> to <code>3.14</code>.</li> <li>All matrix versions are required (no allow-fail matrix entry).</li> <li>Python <code>3.14</code> is treated as stable support, not preview support.</li> <li>Coverage report is generated as <code>coverage.xml</code>.</li> <li>Codecov upload runs in CI for Python <code>3.10</code> jobs.</li> </ul>"},{"location":"testing/#test-scope-summary","title":"Test Scope Summary","text":"<ul> <li>Core API generation: decorator metadata, OpenAPI JSON/YAML output</li> <li>CLI behavior: command parsing, generation/validation command paths</li> <li>Security behavior: sanitization/validation and scanner checks (Bandit/Semgrep in CI)</li> </ul>"},{"location":"testing/#adding-new-tests","title":"Adding New Tests","text":"<p>When adding a feature:</p> <ol> <li>Add happy-path tests.</li> <li>Add error and validation edge cases.</li> <li>Add regression tests for fixed bugs.</li> <li>Keep tests isolated and deterministic.</li> </ol>"},{"location":"testing/#performance-checks","title":"Performance Checks","text":""},{"location":"troubleshooting/","title":"Troubleshooting Guide","text":"<p>This guide helps you diagnose and resolve common issues with azure-functions-openapi.</p>"},{"location":"troubleshooting/#common-issues","title":"\ud83d\udea8 Common Issues","text":""},{"location":"troubleshooting/#1-import-errors","title":"1. Import Errors","text":""},{"location":"troubleshooting/#problem-modulenotfounderror","title":"Problem: ModuleNotFoundError","text":"<pre><code>ModuleNotFoundError: No module named 'azure_functions_openapi'\n</code></pre> <p>Solutions: 1. Install the package: <pre><code>pip install azure-functions-openapi\n</code></pre></p> <ol> <li> <p>Check virtual environment: <pre><code># Activate your virtual environment\nsource .venv/bin/activate  # Linux/Mac\n# or\n.venv\\Scripts\\activate     # Windows\n\n# Install in the correct environment\npip install azure-functions-openapi\n</code></pre></p> </li> <li> <p>Verify installation: <pre><code>pip list | grep azure-functions-openapi\npython -c \"import azure_functions_openapi; print('OK')\"\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#problem-import-from-wrong-module","title":"Problem: Import from wrong module","text":"<pre><code># \u274c Wrong\nfrom azure_functions_doctor import openapi\n\n# \u2705 Correct\nfrom azure_functions_openapi.decorator import openapi\n</code></pre>"},{"location":"troubleshooting/#2-decorator-issues","title":"2. Decorator Issues","text":""},{"location":"troubleshooting/#problem-decorator-not-working","title":"Problem: Decorator not working","text":"<pre><code>@openapi(summary=\"Test\")\ndef my_function(req):\n    return func.HttpResponse(\"Hello\")\n</code></pre> <p>Solutions: 1. Check decorator order: <pre><code># \u2705 Correct order\n@app.route(route=\"test\", auth_level=func.AuthLevel.ANONYMOUS)\n@openapi(summary=\"Test\")\ndef my_function(req):\n    return func.HttpResponse(\"Hello\")\n</code></pre></p> <ol> <li>Verify function registration: <pre><code>from azure_functions_openapi.decorator import get_openapi_registry\n\nregistry = get_openapi_registry()\nprint(f\"Registered functions: {list(registry.keys())}\")\n</code></pre></li> </ol>"},{"location":"troubleshooting/#problem-validation-errors","title":"Problem: Validation errors","text":"<pre><code>ValueError: Invalid route path: &lt;script&gt;alert('xss')&lt;/script&gt;\n</code></pre> <p>Solutions: 1. Use safe route paths: <pre><code># \u274c Dangerous\n@openapi(route=\"&lt;script&gt;alert('xss')&lt;/script&gt;\")\n\n# \u2705 Safe\n@openapi(route=\"/api/users\")\n</code></pre></p> <ol> <li>Check parameter validation: <pre><code># \u274c Invalid parameters\n@openapi(parameters=\"not_a_list\")\n\n# \u2705 Valid parameters\n@openapi(parameters=[\n    {\"name\": \"id\", \"in\": \"path\", \"required\": True, \"schema\": {\"type\": \"integer\"}}\n])\n</code></pre></li> </ol>"},{"location":"troubleshooting/#3-openapi-generation-issues","title":"3. OpenAPI Generation Issues","text":""},{"location":"troubleshooting/#problem-empty-openapi-spec","title":"Problem: Empty OpenAPI spec","text":"<pre><code>{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\"title\": \"API\", \"version\": \"1.0.0\"},\n  \"paths\": {}\n}\n</code></pre> <p>Solutions: 1. Check function registration: <pre><code>from azure_functions_openapi.decorator import get_openapi_registry\n\nregistry = get_openapi_registry()\nif not registry:\n    print(\"No functions registered with @openapi decorator\")\n</code></pre></p> <ol> <li>Verify decorator usage: <pre><code># Make sure you're using the decorator correctly\n@openapi(summary=\"Test function\")\ndef test_function(req):\n    return func.HttpResponse(\"OK\")\n</code></pre></li> </ol>"},{"location":"troubleshooting/#problem-schema-generation-errors","title":"Problem: Schema generation errors","text":"<pre><code>RuntimeError: Failed to generate OpenAPI specification\n</code></pre> <p>Solutions: 1. Check Pydantic models: <pre><code># \u274c Invalid model\nclass InvalidModel:\n    def __init__(self):\n        self.name = \"test\"\n\n# \u2705 Valid Pydantic model\nfrom pydantic import BaseModel\n\nclass ValidModel(BaseModel):\n    name: str\n</code></pre></p> <ol> <li>Handle model errors gracefully: <pre><code>try:\n    spec = generate_openapi_spec()\nexcept RuntimeError as e:\n    print(f\"OpenAPI generation failed: {e}\")\n</code></pre></li> </ol>"},{"location":"troubleshooting/#4-swagger-ui-issues","title":"4. Swagger UI Issues","text":""},{"location":"troubleshooting/#problem-swagger-ui-not-loading","title":"Problem: Swagger UI not loading","text":"<p>Solutions: 1. Check route registration: <pre><code>@app.route(route=\"docs\", auth_level=func.AuthLevel.ANONYMOUS)\ndef swagger_ui(req):\n    return render_swagger_ui()\n</code></pre></p> <ol> <li> <p>Verify OpenAPI JSON endpoint: <pre><code>@app.route(route=\"openapi.json\", auth_level=func.AuthLevel.ANONYMOUS)\ndef openapi_json(req):\n    return func.HttpResponse(get_openapi_json(), mimetype=\"application/json\")\n</code></pre></p> </li> <li> <p>Check browser console for errors:</p> </li> <li>Open browser developer tools</li> <li>Check for JavaScript errors</li> <li>Verify network requests to <code>/api/openapi.json</code></li> </ol>"},{"location":"troubleshooting/#problem-csp-content-security-policy-errors","title":"Problem: CSP (Content Security Policy) errors","text":"<pre><code>Refused to load the script because it violates the following Content Security Policy directive\n</code></pre> <p>Solutions: 1. Use custom CSP policy: <pre><code>custom_csp = \"default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net\"\nreturn render_swagger_ui(custom_csp=custom_csp)\n</code></pre></p> <ol> <li>Disable CSP for development: <pre><code># For development only\ncustom_csp = \"default-src 'self' 'unsafe-inline' 'unsafe-eval'\"\nreturn render_swagger_ui(custom_csp=custom_csp)\n</code></pre></li> </ol>"},{"location":"troubleshooting/#5-cli-tool-issues","title":"5. CLI Tool Issues","text":""},{"location":"troubleshooting/#problem-cli-command-not-found","title":"Problem: CLI command not found","text":"<pre><code>azure-functions-openapi: command not found\n</code></pre> <p>Solutions: 1. Reinstall the package: <pre><code>pip install --upgrade azure-functions-openapi\n</code></pre></p> <ol> <li> <p>Check installation: <pre><code>pip show azure-functions-openapi\n</code></pre></p> </li> <li> <p>Use Python module syntax: <pre><code>python -m azure_functions_openapi.cli --help\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#problem-spec-validation-errors","title":"Problem: Spec validation errors","text":"<pre><code>openapi-spec-validator openapi.json\n</code></pre> <p>Solutions: 1. Check OpenAPI spec format: <pre><code>{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\n    \"title\": \"API\",\n    \"version\": \"1.0.0\"\n  },\n  \"paths\": {}\n}\n</code></pre></p> <ol> <li>Use correct file format: <pre><code># For JSON files\nopenapi-spec-validator spec.json\n\n# For YAML files\nopenapi-spec-validator spec.yaml\n</code></pre></li> </ol>"},{"location":"troubleshooting/#debugging-techniques","title":"\ud83d\udd0d Debugging Techniques","text":""},{"location":"troubleshooting/#1-enable-debug-logging","title":"1. Enable Debug Logging","text":"<pre><code>import logging\n\n# Enable debug logging\nlogging.basicConfig(level=logging.DEBUG)\nlogger = logging.getLogger('azure_functions_openapi')\nlogger.setLevel(logging.DEBUG)\n</code></pre>"},{"location":"troubleshooting/#2-check-registry-state","title":"2. Check Registry State","text":"<pre><code>from azure_functions_openapi.decorator import get_openapi_registry\n\nregistry = get_openapi_registry()\nprint(\"Registered functions:\")\nfor func_name, metadata in registry.items():\n    print(f\"  {func_name}: {metadata}\")\n</code></pre>"},{"location":"troubleshooting/#3-test-openapi-generation","title":"3. Test OpenAPI Generation","text":"<pre><code>from azure_functions_openapi.openapi import generate_openapi_spec\n\ntry:\n    spec = generate_openapi_spec()\n    print(\"OpenAPI spec generated successfully\")\n    print(f\"Paths: {list(spec.get('paths', {}).keys())}\")\nexcept Exception as e:\n    print(f\"OpenAPI generation failed: {e}\")\n    import traceback\n    traceback.print_exc()\n</code></pre>"},{"location":"troubleshooting/#getting-help","title":"\ud83d\udcde Getting Help","text":""},{"location":"troubleshooting/#1-check-documentation","title":"1. Check Documentation","text":"<ul> <li>API Reference</li> <li>Security Guide</li> <li>CLI Guide</li> </ul>"},{"location":"troubleshooting/#2-enable-verbose-logging","title":"2. Enable Verbose Logging","text":"<pre><code>import logging\nlogging.basicConfig(level=logging.DEBUG)\n</code></pre>"},{"location":"troubleshooting/#3-report-issues","title":"3. Report Issues","text":"<p>When reporting issues, include:</p> <ol> <li>Python version: <code>python --version</code></li> <li>Package version: <code>pip show azure-functions-openapi</code></li> <li>Error traceback: Full stack trace</li> <li>Code example: Minimal reproducible example</li> <li>Environment: OS, Azure Functions version, etc.</li> </ol>"},{"location":"troubleshooting/#4-community-support","title":"4. Community Support","text":"<ul> <li>GitHub Issues</li> <li>GitHub Discussions</li> </ul>"},{"location":"troubleshooting/#configuration","title":"\ud83d\udd27 Configuration","text":""},{"location":"troubleshooting/#environment-variables","title":"Environment Variables","text":"<pre><code># Debug mode\nexport AZURE_FUNCTIONS_OPENAPI_DEBUG=1\n\n# Log level\nexport AZURE_FUNCTIONS_OPENAPI_LOG_LEVEL=DEBUG\n</code></pre>"},{"location":"usage/","title":"Usage Guide: azure-functions-openapi","text":"<p>This guide walks you through documenting Python Azure Functions using OpenAPI (Swagger) via <code>azure-functions-openapi</code>. It focuses on practical usage based on a full-featured Todo API example.</p> <p>\ud83d\udd17 For installation and setup, see the Installation Guide. \ud83d\udd0d For full API reference of the decorator, see the <code>@openapi</code> API Reference.</p>"},{"location":"usage/#table-of-contents","title":"Table of Contents","text":"<ul> <li>@openapi Decorator</li> <li>Pydantic Models</li> <li>Parameters (Query / Path / Header)</li> <li>Response Schema Options</li> <li>HTTP Methods and Routing</li> <li>Exposing OpenAPI Docs</li> <li>JSON and YAML Output</li> <li>Swagger UI Configuration</li> <li>End-to-End Example: Todo API</li> </ul>"},{"location":"usage/#openapi-decorator","title":"@openapi Decorator","text":"<p>Use the <code>@openapi</code> decorator to attach OpenAPI metadata to each function. This metadata is used at runtime to generate:</p> <ul> <li><code>/openapi.json</code>: OpenAPI schema in JSON format</li> <li><code>/openapi.yaml</code>: (optional) YAML version of the schema</li> <li><code>/docs</code>: Swagger UI</li> </ul> <p>See the full list of supported parameters in the API Reference.</p>"},{"location":"usage/#example","title":"Example","text":"<pre><code>@openapi(\n    summary=\"Create a new todo\",\n    description=\"Add a new todo item with a title.\",\n    tags=[\"Todos\"],\n    operation_id=\"createTodo\",\n    route=\"/api/create_todo\",\n    method=\"post\",\n    request_model=TodoCreateRequest,\n    response_model=TodoResponse,\n    response={\n        201: {\"description\": \"Todo created\"},\n        400: {\"description\": \"Invalid request\"}\n    }\n)\n</code></pre>"},{"location":"usage/#pydantic-models","title":"Pydantic Models","text":"<p>Define request and response models using Pydantic v1 or v2. These models are converted into OpenAPI-compatible schemas and embedded under <code>components.schemas</code> in the spec.</p> <pre><code>class TodoCreateRequest(BaseModel):\n    title: str\n\nclass TodoResponse(BaseModel):\n    id: int\n    title: str\n    done: bool\n</code></pre> <p>\u2705 Pydantic v1 and v2 are both supported. The library detects the installed version automatically.</p>"},{"location":"usage/#parameters-query-path-header","title":"Parameters (Query / Path / Header)","text":"<p>Use the <code>parameters</code> argument to define additional request parameters such as query strings, path variables, or headers.</p> <pre><code>parameters=[\n    {\n        \"name\": \"id\",\n        \"in\": \"query\",  # or: path, header\n        \"required\": True,\n        \"description\": \"Todo item ID\",\n        \"schema\": {\"type\": \"integer\"}\n    }\n]\n</code></pre> <p>Each parameter follows the OpenAPI 3.0 format.</p>"},{"location":"usage/#response-schema-options","title":"Response Schema Options","text":"<p>There are two ways to define responses:</p> <ol> <li> <p><code>response_model=TodoResponse</code>    Automatically creates schema for <code>200</code> status code</p> </li> <li> <p><code>response={...}</code>    Manually define multiple response codes and content types</p> </li> </ol> <p>You can use both together to document a default response and special cases (e.g., 400, 404).</p>"},{"location":"usage/#http-methods-routing","title":"HTTP Methods &amp; Routing","text":"<p>To correctly reflect your API in the OpenAPI spec, set both:</p> <ul> <li><code>route=\"...\"</code> \u2192 path exposed in spec</li> <li><code>method=\"...\"</code> \u2192 HTTP verb (GET, POST, PUT, DELETE, etc.)</li> </ul> <p>Also ensure your Azure Function is decorated with the corresponding route:</p> <pre><code>@app.route(route=\"create_todo\", methods=[\"POST\"])\n</code></pre>"},{"location":"usage/#exposing-openapi-docs","title":"Exposing OpenAPI Docs","text":"<p>These endpoints must be manually added to your <code>FunctionApp</code>:</p> <pre><code>@app.route(route=\"openapi.json\")\ndef openapi_spec(req: func.HttpRequest) -&gt; func.HttpResponse:\n    return func.HttpResponse(get_openapi_json())\n\n@app.route(route=\"docs\")\ndef swagger_ui(req: func.HttpRequest) -&gt; func.HttpResponse:\n    return render_swagger_ui()\n</code></pre> <ul> <li><code>/openapi.yaml</code> also available if you install <code>PyYAML</code></li> </ul>"},{"location":"usage/#json-yaml-output","title":"JSON &amp; YAML Output","text":"Route Format Description <code>/openapi.json</code> JSON Full OpenAPI schema for API consumers <code>/openapi.yaml</code> YAML (Optional) Easier to read and edit manually <code>/docs</code> Swagger UI Developer-friendly interactive UI"},{"location":"usage/#swagger-ui-configuration","title":"Swagger UI Configuration","text":"<pre><code>from azure_functions_openapi.swagger_ui import render_swagger_ui\n\nresponse = render_swagger_ui(openapi_url=\"/api/openapi.json\", title=\"API Docs\")\n</code></pre>"},{"location":"usage/#security-configuration","title":"Security Configuration","text":"<pre><code>from azure_functions_openapi.swagger_ui import render_swagger_ui\n\ncustom_csp = \"default-src 'self'; script-src 'self'\"\nresponse = render_swagger_ui(custom_csp=custom_csp)\n</code></pre>"},{"location":"usage/#end-to-end-example-todo-api","title":"End-to-End Example: Todo API","text":"<p>The Todo example implements the following operations:</p> Function Method Route Summary <code>create_todo</code> POST <code>/api/create_todo</code> Create a new todo <code>list_todos</code> GET <code>/api/list_todos</code> List all todos <code>get_todo</code> GET <code>/api/get_todo</code> Get todo by ID <code>update_todo</code> PUT <code>/api/update_todo</code> Update todo <code>delete_todo</code> DELETE <code>/api/delete_todo</code> Delete todo <p>Each function demonstrates:</p> <ul> <li>How to use <code>@openapi</code> to define documentation metadata</li> <li>Parameterized endpoints (<code>query</code>, <code>header</code>)</li> <li>Typed request/response models with Pydantic</li> <li>Swagger UI output for all routes</li> </ul> <p>You can import the generated spec into tools like:</p> <ul> <li>Postman</li> <li>SwaggerHub</li> <li>Azure API Management</li> </ul>"},{"location":"usage/#happy-documenting","title":"Happy documenting!","text":""},{"location":"usage/#function-endpoints","title":"Function Endpoints","text":"<p>Once the app is running (<code>func start</code>), the following routes will be available:</p> Function Method Route Description <code>create_todo</code> POST http://localhost:7071/api/create_todo Create a new todo <code>delete_todo</code> DELETE http://localhost:7071/api/delete_todo Delete a todo by ID <code>get_todo</code> GET http://localhost:7071/api/get_todo Get todo by ID <code>list_todos</code> GET http://localhost:7071/api/list_todos List all todos <code>update_todo</code> PUT http://localhost:7071/api/update_todo Update a todo <code>openapi_spec</code> GET http://localhost:7071/api/openapi.json OpenAPI JSON spec <code>openapi_yaml_spec</code> GET http://localhost:7071/api/openapi.yaml OpenAPI YAML spec <code>swagger_ui</code> GET http://localhost:7071/api/docs Swagger UI"},{"location":"usage/#sample-openapi-output-json","title":"Sample OpenAPI Output (JSON)","text":"<p>Example snippet from <code>/openapi.json</code>:</p> <pre><code>{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\n    \"title\": \"API\",\n    \"version\": \"1.0.0\"\n  },\n  \"paths\": {\n    \"/api/create_todo\": {\n      \"post\": {\n        \"summary\": \"Create a new todo\",\n        \"description\": \"Add a new todo item with a title.\",\n        \"operationId\": \"createTodo\",\n        \"tags\": [\"Todos\"],\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"title\": \"TodoCreateRequest\",\n                \"type\": \"object\",\n                \"properties\": {\n                  \"title\": { \"type\": \"string\" }\n                },\n                \"required\": [\"title\"]\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"201\": { \"description\": \"Todo created successfully\" },\n          \"400\": { \"description\": \"Invalid request\" },\n          \"200\": {\n            \"description\": \"Successful Response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"title\": \"TodoResponse\",\n                  \"type\": \"object\",\n                  \"properties\": {\n                    \"id\": { \"type\": \"integer\" },\n                    \"title\": { \"type\": \"string\" },\n                    \"done\": { \"type\": \"boolean\" }\n                  },\n                  \"required\": [\"id\", \"title\", \"done\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre> <p>This output can be imported into tools like SwaggerHub, Postman, or Azure API Management.</p>"},{"location":"usage/#swagger-ui-preview","title":"Swagger UI Preview","text":"<p>Below is a preview of the automatically generated Swagger UI:</p> <p></p>"},{"location":"examples/hello_openapi/","title":"Hello OpenAPI Example","text":"<p>The <code>hello_openapi</code> example demonstrates the most minimal usage of the <code>@openapi</code> decorator.</p>"},{"location":"examples/hello_openapi/#files","title":"Files","text":"<ul> <li><code>examples/hello_openapi/function_app.py</code></li> <li><code>examples/hello_openapi/host.json</code></li> <li><code>examples/hello_openapi/requirements.txt</code></li> </ul>"},{"location":"examples/hello_openapi/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10+</li> <li>Azure Functions Core Tools</li> </ul>"},{"location":"examples/hello_openapi/#key-concepts","title":"Key Concepts","text":"<ul> <li>One route</li> <li>No request model</li> <li>Returns a simple greeting response</li> </ul>"},{"location":"examples/hello_openapi/#sample","title":"Sample","text":"<pre><code>@app.route(route=\"hello\", ...)\n@openapi(summary=\"Hello\", description=\"Returns a greeting.\", response_model=HelloResponse)\ndef hello(req: HttpRequest) -&gt; HttpResponse:\n    ...\n</code></pre>"},{"location":"examples/hello_openapi/#local-setup","title":"Local Setup","text":"<p>Create a <code>local.settings.json</code> (not committed) to configure the Python worker runtime:</p> <pre><code>{\n  \"IsEncrypted\": false,\n  \"Values\": {\n    \"FUNCTIONS_WORKER_RUNTIME\": \"python\"\n  }\n}\n</code></pre> <p>Install dependencies:</p> <pre><code>python3.10 -m venv .venv\nsource .venv/bin/activate\npip install -r requirements.txt\n</code></pre> <p>Run locally:</p> <pre><code>func start\n</code></pre>"},{"location":"examples/hello_openapi/#endpoints","title":"Endpoints","text":"<ul> <li><code>GET /api/http_trigger?name=Azure</code></li> <li><code>GET /api/openapi.json</code></li> <li><code>GET /api/openapi.yaml</code></li> <li><code>GET /api/docs</code></li> </ul>"},{"location":"examples/todo_crud_api/","title":"Todo API Example","text":"<p>The <code>todo_crud_api</code> example shows how to build a basic Todo API using:</p> <ul> <li>Azure Functions (v2 model)</li> <li><code>@openapi</code> decorators</li> <li>Pydantic models</li> </ul>"},{"location":"examples/todo_crud_api/#features","title":"Features","text":"<ul> <li><code>POST /create_todo</code> to add a new item</li> <li><code>GET /list_todos</code> to fetch all items</li> </ul>"},{"location":"examples/todo_crud_api/#directory","title":"Directory","text":"<ul> <li><code>examples/todo_crud_api/function_app.py</code></li> <li><code>examples/todo_crud_api/host.json</code></li> </ul>"},{"location":"examples/todo_crud_api/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10+</li> <li>Azure Functions Core Tools</li> </ul>"},{"location":"examples/todo_crud_api/#local-setup","title":"Local Setup","text":"<p>Create a <code>local.settings.json</code> (not committed) to configure the Python worker runtime:</p> <pre><code>{\n  \"IsEncrypted\": false,\n  \"Values\": {\n    \"FUNCTIONS_WORKER_RUNTIME\": \"python\"\n  }\n}\n</code></pre> <p>Install dependencies:</p> <pre><code>python3.10 -m venv .venv\nsource .venv/bin/activate\npip install -r requirements.txt\n</code></pre> <p>Run locally:</p> <pre><code>func start\n</code></pre>"},{"location":"examples/todo_crud_api/#endpoints","title":"Endpoints","text":"<ul> <li><code>POST /api/create_todo</code></li> <li><code>GET /api/list_todos</code></li> <li><code>GET /api/get_todo</code></li> <li><code>PUT /api/update_todo</code></li> <li><code>DELETE /api/delete_todo</code></li> <li><code>GET /api/openapi.json</code></li> <li><code>GET /api/openapi.yaml</code></li> <li><code>GET /api/docs</code></li> </ul>"}]}